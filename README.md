# ТЗ_DevOps

Написать скрипт на bash для мониторинга процесса test в среде linux.
Скрипт должен отвечать следующим требованиям:
- Запускаться при запуске системы (предпочтительно написать юнит
systemd в дополнение к скрипту)
- Отрабатывать каждую минуту
- Если процесс запущен, то стучаться(по https) на
https://test.com/monitoring/test/api
- Если процесс был перезапущен, писать в лог /var/log/monitoring.log
(если процесс не запущен, то ничего не делать)
- Если сервер мониторинга не доступен, так же писать в лог.
--------------------------
Предоставляю Вам решение, которое включает:
 - Bash-скрипт для мониторинга процесса test
 - Юнит systemd, чтобы скрипт запускался при старте системы и работал каждую минуту через таймер
 
   ### 1. Bash-скрипт - monitor-test.sh
   После делаем  скрипт исполняемым:
      sudo chmod +x /usr/local/bin/monitor-test.sh
   ### 2. systemd Unit-файлы - monitor-test.service и создаём monitor-test.timer

### Активация сервиса и таймера:
   sudo systemctl daemon-reexec
   sudo systemctl daemon-reload
   sudo systemctl enable --now monitor-test.timer

### Ещё можно  добавить ротацию логов (logrotate), защиту от запуска нескольких копий (flock) или систему уведомлений.
 1. Ротация логов - monitoring.log
    Создаём файл  - monitoring:

### Это будет:
   > - ротация каждый день,
   > - хранить 7 архивов (rotate 7),
   > - сжатие (compress),
   > - не ругаться, если файл отсутствует (missingok),
   > - не трогать пустые (notifempty).




